<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MRSL Motion Primitive Library: MRSL Motion Primitive Library for quadrotor v1.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MRSL Motion Primitive Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A motion primitive library for generating trajectory for mobile robots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MRSL Motion <a class="el" href="classPrimitive.html" title="Primitive class. ">Primitive</a> Library for quadrotor v1.0 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://app.wercker.com/project/byKey/ae575e9b5218e1f02684065445c6de66"></a> </p><hr/>
<p> Motion <a class="el" href="classPrimitive.html" title="Primitive class. ">Primitive</a> Library is a search-based planner to compute dynamically feasible trajectories for a quadrotor flying in an obstacle-cluttered environment. Our approach searches for smooth, minimum-time trajectories by exploring the map using a set of short-duration motion primitives. The primitives are generated by solving an optimal control problem and induce a finite lattice discretization on the state space which can be explored using a graph-search algorithm. The proposed approach is able to generate resolution-complete (i.e., optimal in the discretized space), safe, dynamically feasibility trajectories efficiently by exploiting the explicit solution of a Linear Quadratic Minimum Time problem. It does not assume a hovering initial condition and, hence, is suitable for fast online re-planning while the robot is moving.</p>
<p>For technical details, refer to the original paper <a href="http://ieeexplore.ieee.org/document/8206119/">"Search-based Motion Planning for Quadrotors using Linear Quadratic Minimum Time Control"</a> that has been published in IROS 2017.</p>
<h2>New Features in v1.0</h2>
<ul>
<li>Reformat the repo structure</li>
<li>Add yaw primitive</li>
<li>Add potential function to perturb trajectory</li>
</ul>
<h2>Installation</h2>
<h4>Prerequisite:</h4>
<ul>
<li><code>PCL</code>: apt install libpcl-dev</li>
<li><code>Eigen</code>: apt install libeigen3-dev</li>
<li><code>YAML-CPP</code>: apt install libyaml-cpp-dev</li>
</ul>
<p>or simply run following commands: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ sudo apt-get update</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ sudo apt install -y libeigen3-dev libpcl-dev libyaml-cpp-dev libproj-dev cmake</div></div><!-- fragment --><p>#### A) Simple cmake </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; make -j4</div></div><!-- fragment --><p>#### B) Using Catkin (not recognizable by catkin_make) </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ mv motion_primitive_library ~/catkin_ws/src</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ cd ~/catkin_ws &amp; catkin_make_isolated -DCMAKE_BUILD_TYPE=Release</div></div><!-- fragment --><h4>CTest</h4>
<p>Run following command in the <code>build</code> folder for testing the executables: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ make test</div></div><!-- fragment --><p>If everything works, you should see the results as: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Running tests...</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Test project /home/sikang/thesis_ws/src/packages/mpl_ros/motion_primitive_library/build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    Start 1: test_traj_solver</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;1/4 Test #1: test_traj_solver .................   Passed    0.00 sec</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    Start 2: test_planner_2d</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;2/4 Test #2: test_planner_2d ..................   Passed    0.91 sec</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    Start 3: test_planner_2d_prior_traj</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;3/4 Test #3: test_planner_2d_prior_traj .......   Passed    0.91 sec</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    Start 4: test_planner_2d_with_yaw</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;4/4 Test #4: test_planner_2d_with_yaw .........   Passed    0.90 sec</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;100% tests passed, 0 tests failed out of 4</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;Total Test time (real) =   2.73 sec</div></div><!-- fragment --><h4>Include in other projects:</h4>
<p>To link this lib properly, add following in the <code>CMakeLists.txt</code> </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;find_package(motion_primitive_library REQUIRED)</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;include_directories(${MOTION_PRIMITIVE_LIBRARY_INCLUDE_DIRS})</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;...</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;add_executable(test_xxx src/test_xxx.cpp)</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;target_link_libraries(test_xxx ${MOTION_PRIMITIVE_LIBRARY_LIBRARIES})</div></div><!-- fragment --><h2>Example Usage</h2>
<h3>Preparation</h3>
<p>To run the planner, three components are required to be set properly:</p>
<h4>1) Set Start and Goal:</h4>
<p>We use the<code>class <a class="el" href="structWaypoint.html" title="Waypoint base class. ">Waypoint</a></code> for the start and goal. A <code><a class="el" href="structWaypoint.html" title="Waypoint base class. ">Waypoint</a></code> contains coordinates of position, velocity, etc and the flag <code>use_xxx</code> to indicate the control input. An example for 2D planning is given as: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;Waypoint2D start, goal; // Initialize start and goal as Waypoint2D</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;start.pos = Vec3f(2.5, -3.5);</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;start.use_pos = true;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;start.use_vel = true;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;start.use_acc = false;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;start.use_jrk = false;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;start.use_yaw = false;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;goal.pos = Vec3f(35, 2.5);</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;goal.control = start.control;</div></div><!-- fragment --><p>The flag <code>use_xxx</code> indicates the planner to plan in different control space. For example, the above example code sets the control in <code>ACC</code> space. Eight options are provided by setting following flags:</p>
<table class="doxtable">
<tr>
<th align="left">~ </th><th align="left">VEL </th><th align="left">ACC </th><th align="left">JRK </th><th align="left">SNP </th><th align="left">VEL&amp;YAW </th><th align="left">ACC&amp;YAW </th><th align="left">JRK&amp;YAW </th><th align="left">SNP&amp;YAW  </th></tr>
<tr>
<td align="left"><code>use_pos:</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td></tr>
<tr>
<td align="left"><code>use_vel:</code> </td><td align="left"><code>false</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>false</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td></tr>
<tr>
<td align="left"><code>use_acc:</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td></tr>
<tr>
<td align="left"><code>use_jrk:</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>true</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>true</code> </td></tr>
<tr>
<td align="left"><code>use_yaw:</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>false</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td><td align="left"><code>true</code> </td></tr>
</table>
<p>In equal, one can also set the attribute <code>control</code> of <code><a class="el" href="structWaypoint.html" title="Waypoint base class. ">Waypoint</a></code> for the same purpose:</p>
<table class="doxtable">
<tr>
<th align="left">~ </th><th align="left">VEL </th><th align="left">ACC </th><th align="left">JRK </th><th align="left">SNP </th><th align="left">VEL&amp;YAW </th><th align="left">ACC&amp;YAW </th><th align="left">JRK&amp;YAW </th><th align="left">SNP&amp;YAW  </th></tr>
<tr>
<td align="left"><code>control:</code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea968f96b0d20e3c80728089cb45401531" title="control input is vel ">Control::VEL</a></code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea4b3e91d06392468a5267128e3d746447" title="control input is acc ">Control::ACC</a></code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea525eb85e444c72fcdb7424798c650292" title="control input is jrk ">Control::JRK</a></code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea75cd6c61c7f6f7a09c15c93b4b15f8f7" title="control input is snp ">Control::SNP</a></code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea04eeabf87c9402e6158640b3137dc9f9" title="control input is vel and yaw ">Control::VELxYAW</a></code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea7abe030d2c08e9b63bf14c77905be815" title="control input is acc and yaw ">Control::ACCxYAW</a></code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea2f3a9c699bce63dd082bfd6ab1b966db" title="control input is jrk and yaw ">Control::JRKxYAW</a></code> </td><td align="left"><code><a class="el" href="namespaceControl.html#af3600af994b25be7c568791eefdadf2ea45e93a971ab802798fef7a84bbe17ebc" title="control input is snp and yaw ">Control::SNPxYAW</a></code> </td></tr>
</table>
<h4>2) Set collision checking method:</h4>
<p>Any planner needs a collision checking function, there are several utils in this package to checking collision for obstacles in different representations. In the most common environment where obstacles are represented as voxels, we use <code>class MapUtil</code> which is a template class that adapts to 2D (<code>OccMapUtil</code>) and 3D (<code>VoxelMapUtil</code>). An example for initializing a 2D collision checking <code>OccMapUtil</code> is given as: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;std::shared_ptr&lt;MPL::OccMapUtil&gt; map_util; // Declare as a shared pointer</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;map_util.reset(new MPL::OccMapUtil); // Initialize map_util</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;map_util-&gt;setMap(origin, dim, data, resolution); // Set the map information</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;...</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;planner-&gt;setMapUtil(map_util); // Set collision checking util</div></div><!-- fragment --><p>Here <code>origin</code>, <code>dim</code>, <code>data</code> and <code>resolution</code> are user input.</p>
<h4>3) Set control input:</h4>
<p>Our planner takes control input to generate primitives. User need to specify it before start planning. An example for the control input <code>U</code> for 2D planning is given as following, in this case, <code>U</code> simply include 9 elements: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;decimal_t u_max = 0.5;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;vec_E&lt;VecDf&gt; U;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;const decimal_t du = u_max / num;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;for(decimal_t dx = -u_max; dx &lt;= u_max; dx += du )</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  for(decimal_t dy = -u_max; dy &lt;= u_max; dy += du )</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      U.push_back(Vec2f(dx, dy));</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;...</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;planner-&gt;setU(U); // Set control input</div></div><!-- fragment --><h3>Run the planner:</h3>
<p>After setting up above 3 required components, a plan thread can be launched as: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;std::unique_ptr&lt;MPL::OccMapPlanner&gt; planner(new MPL::OccMapPlanner(true)); // Declare a 2D planner with verbose</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;planner-&gt;setMapUtil(map_util); // Set collision checking util</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;planner-&gt;setU(U); // Set control input</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;planner-&gt;setDt(1.0); // Set dt for each primitive</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;bool valid = planner-&gt;plan(start, goal); // Plan from start to goal</div></div><!-- fragment --><h2>Test Examples</h2>
<h4>Example1 (direct planning):</h4>
<p>After compiling by <code>cmake</code>, run following command for test a 2D planning in a given map: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ ./build/test_planner_2d ./data/corridor.yaml</div></div><!-- fragment --><p>You should see following messages if it works properly: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[MapPlanner] PLANNER VERBOSE ON</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;[PlannerBase] set v_max: 1.000000</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;[PlannerBase] set a_max: 1.000000</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;[PlannerBase] set dt: 1.000000</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Start:</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;pos:  2.5 -3.5</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;vel: 0 0</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;acc: 0 0</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;jrk: 0 0</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;yaw: 0</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;use_pos | use_vel | use_acc | use_jrk | use_yaw :</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;1 | 1 | 0 | 0 | 0</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;control: 11000</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;use acc!</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;Goal:</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;pos:  37 2.5</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;vel: 0 0</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;acc: 0 0</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;jrk: 0 0</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;yaw: 0</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;use_pos | use_vel | use_acc | use_jrk | use_yaw :</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;1 | 1 | 0 | 0 | 0</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;control: 11000</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;use acc!</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;++++++++++++++++++ PLANNER +++++++++++++++</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;+                  w: 10.00               +</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;+                 dt: 1.00               +</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;+                 ds: 0.0100               +</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;+                 dv: 0.1000               +</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;+                 da: 0.1000               +</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;+                 dj: 0.1000               +</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;+              v_max: 1.00               +</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;+              a_max: 1.00               +</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;+              j_max: -1.00               +</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;+              U num: 9                +</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;+            tol_dis: 0.50               +</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;+            tol_vel: 0.00               +</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;+            tol_acc: 0.00               +</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;+              alpha: 0                 +</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;+heur_ignore_dynamics: 1                 +</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;++++++++++ PLANNER +++++++++++</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;Start from new node!</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;goalNode fval: 358.000000, g: 353.000000!</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;Expand [291] nodes!</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;Reached Goal !!!!!!</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;...</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;MPL Planner takes: 5.000000 ms</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;MPL Planner expanded states: 260</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;Total time T: 35.000000</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;Total J:  J(VEL) = 38.750000, J(ACC) = 3.000000, J(JRK) = 0.000000, J(SNP) = 0.000000</div></div><!-- fragment --><p>The output image <code>output.svg</code> is saved in the current folder: </p><div class="image">
<img src="example1.png" alt="example1.png"/>
<div class="caption">
Visualization</div></div>
<p>(blue dots show the expended states, red circles indicate start and goal).</p>
<p>It is recommended to visualize the <code>svg</code> in web browser (for example, <code>firefox output.svg</code>).</p>
<h4>Example2 (planning with a prior trajectory):</h4>
<p>Run following command for test a 2D planning, it first finds a trajector in low dimensional space (acceleration-driven), then it uses the planned trajectory to refine for a trajectory in high dimensional space (jerk-driven): </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ ./build/test_planner_2d_prior_traj ./data/corridor.yaml</div></div><!-- fragment --><p>In the following output image, the black curve is the prior trajectory: </p><div class="image">
<img src="example2.png" alt="example2.png"/>
<div class="caption">
Visualization</div></div>
 <h4>Example3 (plan with yaw):</h4>
<p>In some cases, the robot needs to move forward within the FOV of the camera or range sensor such that the yaw needs to be considered when planning. <code>MapPlanner</code> handles the yaw constraint properly. Following image shows the output of running: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ ./build/test_planner_2d_with_yaw ./data/corridor.yaml</div></div><!-- fragment --> <div class="image">
<img src="example3.png" alt="example3.png"/>
<div class="caption">
Visualization</div></div>
 <h4>Example4 (trajectory generation):</h4>
<p>Generate trajectory from a given path, without obstacles: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ ./build/test_traj_solver</div></div><!-- fragment --> <div class="image">
<img src="example4.png" alt="example4.png"/>
<div class="caption">
Visualization</div></div>
<p> Here we generate three different trajectories using the same path and time allocation: the red one is minimum velocity trajectory, the green one is the minimum acceleration trajectory and the blue one is the minimum jerk trajectory.</p>
<h2>Doxygen</h2>
<p>For API, please refer to <a href="https://sikang.github.io/motion_primitive_library">Doxygen</a>.</p>
<h2>ROS Wrapper</h2>
<p>The interface with ROS for visualization and implementation can be found in <a href="https://github.com/sikang/mpl_ros.git"><code>mpl_ros</code></a>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
